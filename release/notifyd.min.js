class NotifyD{constructor(api){this.api=api,this.error_mess="",this.freq=5e3,this.interval=null,this.query={},this.connectTimeout=5e3,this.callback=null,this.debug=!1,console.log("NotifyD initialized!")}clog(t){return this.debug&&console.log(timeStamp()+"-NotifyD: "+t),!0}start(){var me=this;this.interval=setInterval(function(){$.ajax({url:me.api,method:"post",data:me.query,timeout:me.connectTimeout,dataType:"json",success:function(res){me.process(res,me)},error:function(res){me.errConnect(res,me)}})},this.freq)}stop(){return this.debug&&this.clog("Shutting down!"),clearInterval(this.interval),!0}process(res,me){var d=new Date;if(1==res.status){var n=new Notify2(res.message,res.class,res.autoHide,res.delay);res.doConfirm&&n.doConfirm(eval(res.cbYes),eval(res.cbNo)),n.notify(),"function"==typeof this.callback&&this.callback(this)}else me.clog("No messages.")}setCallback(callback){return this.callback=callback,!0}setConnectTimeout(n){return this.connectTimeout=n,!0}setDebug(bool){return this.debug=bool,!0}setFreq(f){return this.freq=f,!0}addData(fld,val){return void 0===fld&&(fld=""),void 0===val&&(val=""),fld.length<1?(this.error_mess="NULL field name not allowed!",this.clog(this.error_mess),!1):(this.query[fld]=val,!0)}errConnect(res,me){return me.error_mess="Failed to connect to: "+me.api+"/Server response: "+res.status,me.clog(me.error_mess),!1}}